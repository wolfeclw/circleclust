<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cluster coordinates based on circular variance — circleclust • circleclust</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Cluster coordinates based on circular variance — circleclust" />
<meta property="og:description" content="circleclust calculates the circular variance of consecutive latitude and
longitude coordinates within a moving window and identifies spatiotemporal clusters
based on a set of flexible parameters.  These parameters include the size of the
window in which to calculate circular variance, the threshold value (circular variance)
to identify clustering, and the minimum number of observations allowed in a
cluster." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">circleclust</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cluster coordinates based on circular variance</h1>
    
    <div class="hidden name"><code>circleclust.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>circleclust</code> calculates the circular variance of consecutive latitude and
longitude coordinates within a moving window and identifies spatiotemporal clusters
based on a set of flexible parameters.  These parameters include the size of the
window in which to calculate circular variance, the threshold value (circular variance)
to identify clustering, and the minimum number of observations allowed in a
cluster.</p>
    </div>

    <pre class="usage"><span class='fu'>circleclust</span><span class='op'>(</span>
  <span class='va'>df</span>,
  dt_field <span class='op'>=</span> <span class='cn'>NULL</span>,
  circvar_threshold <span class='op'>=</span> <span class='fl'>0.7</span>,
  window <span class='op'>=</span> <span class='fl'>60</span>,
  show_circvar <span class='op'>=</span> <span class='cn'>FALSE</span>,
  rspeed_threshold <span class='op'>=</span> <span class='cn'>NULL</span>,
  pl_dist_threshold <span class='op'>=</span> <span class='cn'>NULL</span>,
  cluster_threshold <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>a data frame with columns <code>speed</code> and <code>azimuth</code> created by <code><a href='move.html'>move()</a></code>.
The data frame must also include datetime, longitude, and latitude columns.</p></td>
    </tr>
    <tr>
      <th>dt_field</th>
      <td><p>POSIXct; name of datetime field.</p></td>
    </tr>
    <tr>
      <th>circvar_threshold</th>
      <td><p>numeric; circular variance threshold to determine clustering.
Default = 0.7.</p></td>
    </tr>
    <tr>
      <th>window</th>
      <td><p>numeric; window (number of rows) in which to calculate circular variance.</p></td>
    </tr>
    <tr>
      <th>show_circvar</th>
      <td><p>logical; if <code>TRUE</code>, a column will be added to the output data
frame listing the circular variance (<code>circvar</code>) for each observation.
Default = <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>rspeed_threshold</th>
      <td><p>numeric; if assigned a numeric value, the 1-minute rolling
median speed (m/s) is calculated. Observations with a circular variance above
'circvar_threshold' and below 'rspeed_threshold' are assigned to a cluster. Assigning
a value to this parameter can mitigate incidental clustering of coordinates due
to stop-and-go transit.</p></td>
    </tr>
    <tr>
      <th>pl_dist_threshold</th>
      <td><p>numeric; distance threshold (meters) used to aggregate
clusters. If the distance between consecutive clusters is below this threshold,
each cluster, and the coordinates between them, are combined into a single
grouping of coordinates. Setting this parameter may be useful if location data
includes transit at a low speed with frequent stops (i.e. walking).</p></td>
    </tr>
    <tr>
      <th>cluster_threshold</th>
      <td><p>numeric; the minimum allowable number of observations
in each cluster.  If the number of observations in an identified cluster is less than this threshold,
the observations are retained but not assigned a to a cluster.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data frame. New columns <code>cluster_grp</code> and <code>activity_status</code> are appended
to the input data frame.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Observations belonging to a cluster are assigned to a cluster group,
which are ordered temporally. Further, observations are marked as either
static or mobile.</p>
<p>The <code>circleclust()</code> function has been optimized to detect changes in activity
pattern within a 5-minute moving window and a threshold circular variance of 0.7.
These parameters can be adjusted if desired.</p>
<p>Imputing lon/lat values using <code><a href='impute_coords.html'>impute_coords()</a></code> is recommended if GPS
coordinates are missing.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='fu'>circleclust</span><span class='op'>(</span><span class='va'>df</span>,
  dt_field <span class='op'>=</span> <span class='cn'>NULL</span>, circvar_threshold <span class='op'>=</span> <span class='fl'>.7</span>, window <span class='op'>=</span> <span class='fl'>60</span>,
  cluster_threshold <span class='op'>=</span> <span class='cn'>NULL</span>, show_circvar <span class='op'>=</span> <span class='cn'>FALSE</span>, rspeed_threshold <span class='op'>=</span> <span class='cn'>NULL</span>,
  pl_dist_threshold <span class='op'>=</span> <span class='cn'>NULL</span>, cluster_threshold <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>


<span class='va'>zoo_trip</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='impute_coords.html'>impute_coords</a></span><span class='op'>(</span><span class='st'>"Date_Time"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dt_aggregate.html'>dt_aggregate</a></span><span class='op'>(</span><span class='st'>"Date_Time"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='move.html'>move</a></span><span class='op'>(</span><span class='st'>"Date_Time"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>circleclust</span><span class='op'>(</span><span class='st'>"Date_Time"</span>, pl_dist_threshold <span class='op'>=</span> <span class='fl'>25</span>, show_circvar <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Chris Wolfe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


